<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class T2Airtime::API - T2Airtime</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/darkfish.js"></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Base
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-i-account_info">#account_info</a>
    
    <li ><a href="#method-i-country_list">#country_list</a>
    
    <li ><a href="#method-i-get_id_from_key">#get_id_from_key</a>
    
    <li ><a href="#method-i-msisdn_info">#msisdn_info</a>
    
    <li ><a href="#method-i-operator_list">#operator_list</a>
    
    <li ><a href="#method-i-ping">#ping</a>
    
    <li ><a href="#method-i-price_list">#price_list</a>
    
    <li ><a href="#method-i-product_list">#product_list</a>
    
    <li ><a href="#method-i-reserve_id">#reserve_id</a>
    
    <li ><a href="#method-i-topup">#topup</a>
    
    <li ><a href="#method-i-transaction_info">#transaction_info</a>
    
    <li ><a href="#method-i-transaction_list">#transaction_list</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-T2Airtime::API">
  <h1 id="class-T2Airtime::API" class="class">
    class T2Airtime::API
  </h1>

  <section class="description">
    
  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-account_info" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">account_info</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the balance in your TransferTo account.  This method shall not be
used more than 24 times per day.</p>
          
          

          
          <div class="method-source-code" id="account_info-source">
            <pre><span class="ruby-comment"># File lib/t2_airtime/api.rb, line 11</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">account_info</span>
  <span class="ruby-identifier">run_action</span> <span class="ruby-value">:check_wallet</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-country_list" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">country_list</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Convenience method to get the country list</p>
          
          

          
          <div class="method-source-code" id="country_list-source">
            <pre><span class="ruby-comment"># File lib/t2_airtime/api.rb, line 245</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">country_list</span>() <span class="ruby-identifier">price_list</span>(<span class="ruby-string">&#39;countries&#39;</span>) <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_id_from_key" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_id_from_key</span><span
            class="method-args">(key)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This method is used to retrieve the ID of a transaction previously
performed based on the key used in the request at that time.</p>
          
          

          
          <div class="method-source-code" id="get_id_from_key-source">
            <pre><span class="ruby-comment"># File lib/t2_airtime/api.rb, line 219</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_id_from_key</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-ivar">@params</span> = { <span class="ruby-identifier">from_key</span><span class="ruby-operator">:</span> <span class="ruby-identifier">key</span> }
  <span class="ruby-identifier">run_action</span> <span class="ruby-value">:get_id_from_key</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-msisdn_info" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">msisdn_info</span><span
            class="method-args">(destination_msisdn, operator_id=nil, delivered_amount_info=1, return_service_fee=1, return_promo=1)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This method is used to retrieve various information of a specific MSISDN
(operator, country…) as well as the list of all products configured for
your specific account and the destination operator of the MSISDN. Returns
relevant information on a MSISDN (operator, country…) as well as the  list
of products configured for your account and the destination operator 
linked to that MSISDN. Allows to check if a MSISDN is subjected to a
promotion</p>

<p>destination_msisdn Destination MSISDN (usually recipient phone number).
This is the destination phone number that will  be credited with the amount
transferred. Format is similar to “msisdn” and restricted to international
phone number only.</p>

<p>delivered_amount_info Setting this to “1” will return the fields
local_info_amount_list,local_info_currency and local_info_value_list in the
<a href="API.html">API</a> response.  Blank or “no” if you do not want this
returned. return_service_fee  Setting this to “1” will return the field
service_fee_list in the <a href="API.html">API</a> response. Blank or “0”
if you do not want it returned. operatorid <a
href="Operator.html">Operator</a> ID of the receiving operator that must be
used when treating the request. If  set, the platform will be forced to use
this operator ID and will not identify the operator of  the destination
MSISDN based on the numbering plan. It is very useful in case of countries
with number portability if you are able to know the destination operator.</p>

<p>return_promo Setting this to “1” will return the current  promotion related
to the transaction’s operator.</p>
          
          

          
          <div class="method-source-code" id="msisdn_info-source">
            <pre><span class="ruby-comment"># File lib/t2_airtime/api.rb, line 149</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">msisdn_info</span>(<span class="ruby-identifier">destination_msisdn</span>, 
                <span class="ruby-identifier">operator_id</span>=<span class="ruby-keyword">nil</span>, 
                <span class="ruby-identifier">delivered_amount_info</span>=<span class="ruby-value">1</span>, <span class="ruby-identifier">return_service_fee</span>=<span class="ruby-value">1</span>, <span class="ruby-identifier">return_promo</span>=<span class="ruby-value">1</span>)
  <span class="ruby-ivar">@params</span> = {
    <span class="ruby-identifier">destination_msisdn</span><span class="ruby-operator">:</span> <span class="ruby-identifier">destination_msisdn</span>,
    <span class="ruby-identifier">delivered_amount_info</span><span class="ruby-operator">:</span> <span class="ruby-identifier">delivered_amount_info</span>,
    <span class="ruby-identifier">return_service_fee</span><span class="ruby-operator">:</span> <span class="ruby-identifier">return_service_fee</span>,
    <span class="ruby-identifier">return_promo</span><span class="ruby-operator">:</span> <span class="ruby-identifier">return_promo</span>
  }
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">oid</span> = <span class="ruby-identifier">operator_id</span>
  <span class="ruby-identifier">run_action</span> <span class="ruby-value">:msisdn_info</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-operator_list" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">operator_list</span><span
            class="method-args">(country_aid)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Convenience method to get the operators list for a given country
@country_aid the airtime id of the country</p>
          
          

          
          <div class="method-source-code" id="operator_list-source">
            <pre><span class="ruby-comment"># File lib/t2_airtime/api.rb, line 249</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">operator_list</span>(<span class="ruby-identifier">country_aid</span>) <span class="ruby-identifier">price_list</span>(<span class="ruby-string">&#39;country&#39;</span>, <span class="ruby-identifier">country_aid</span>) <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-ping" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">ping</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Test the connection to the Airtime <a href="API.html">API</a>. Can be used
for keep-alive.</p>
          
          

          
          <div class="method-source-code" id="ping-source">
            <pre><span class="ruby-comment"># File lib/t2_airtime/api.rb, line 5</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">ping</span>
  <span class="ruby-identifier">run_action</span> <span class="ruby-value">:ping</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-price_list" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">price_list</span><span
            class="method-args">(info_type, content=nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>These methods are used to retrieve coverage and pricelist offered to you.
parameters</p>

<h6 id="method-i-price_list-label-"><span><a href="#method-i-price_list-label-">&para;</a> <a href="#top">&uarr;</a></span></h6>

<p>info_type</p>
<hr>

<pre> i) “countries”: Returns a list of all countries offered to you
ii) “country”  : Returns a list of operators in the country</pre>

<p>iii) “operator” : Returns a list of wholesale and retail price for the
operator</p>

<p>content</p>
<hr>

<pre> i) Not used if info_type = “countries”
ii) countryid of the requested country if info_type = “country”</pre>

<p>iii) operatorid of the requested operator if info_type = “operator”</p>
          
          

          
          <div class="method-source-code" id="price_list-source">
            <pre><span class="ruby-comment"># File lib/t2_airtime/api.rb, line 238</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">price_list</span>(<span class="ruby-identifier">info_type</span>, <span class="ruby-identifier">content</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-ivar">@params</span>[<span class="ruby-value">:info_type</span>] = <span class="ruby-identifier">info_type</span>
  <span class="ruby-identifier">content</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@params</span>[<span class="ruby-value">:content</span>] = <span class="ruby-identifier">content</span>
  <span class="ruby-identifier">run_action</span> <span class="ruby-value">:pricelist</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-product_list" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">product_list</span><span
            class="method-args">(operator_aid)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Convenience method to get the product list for a given operator
@operator_aid the airtime id of the operator</p>
          
          

          
          <div class="method-source-code" id="product_list-source">
            <pre><span class="ruby-comment"># File lib/t2_airtime/api.rb, line 253</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">product_list</span>(<span class="ruby-identifier">operator_aid</span>) <span class="ruby-identifier">price_list</span>(<span class="ruby-string">&#39;operator&#39;</span>, <span class="ruby-identifier">operator_aid</span>) <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-reserve_id" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reserve_id</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This method is used to reserve an ID in the system. This ID can then be
used in the “topup” or “simulation” requests. This way, your system knows
the ID of the transaction before sending the request to TransferTo (else it
will only be displayed in the response).</p>
          
          

          
          <div class="method-source-code" id="reserve_id-source">
            <pre><span class="ruby-comment"># File lib/t2_airtime/api.rb, line 166</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reserve_id</span>
  <span class="ruby-identifier">run_action</span> <span class="ruby-value">:reserve_id</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-topup" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">topup</span><span
            class="method-args">(msisdn, destination_msisdn, product, method='topup', reserved_id=nil, send_sms=true, sms=nil, sender_text=nil, operator_id=nil, return_service_fee=1, delivered_amount_info=1, return_timestamp=1, return_version=1, return_promo=0)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>By default, an SMS notification is sent to the recipient after every
successful Top-up. The default originating address for the SMS is “8888”.
The following is the default SMS which is translated into local languages
for most of recipient countries: Congratulations! You&#39;ve received 
AMOUNT_CURRENCY from SENDER. Thank you for using TransferTo. FREE_TEXT.  •
AMOUNT  CURRENCY  is  the  amount  that  has  been sent with the currency.
• SENDER can be a name or a phone number. • FREE_TEXT  is  the  content  of
the  field  named  “sms” of the topup method.</p>
          
          

          
          <div class="method-source-code" id="topup-source">
            <pre><span class="ruby-comment"># File lib/t2_airtime/api.rb, line 78</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">topup</span>(<span class="ruby-identifier">msisdn</span>, <span class="ruby-identifier">destination_msisdn</span>, <span class="ruby-identifier">product</span>, <span class="ruby-identifier">method</span>=<span class="ruby-string">&#39;topup&#39;</span>,
          <span class="ruby-identifier">reserved_id</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">send_sms</span>=<span class="ruby-keyword">true</span>, <span class="ruby-identifier">sms</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">sender_text</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">operator_id</span>=<span class="ruby-keyword">nil</span>, 
          <span class="ruby-identifier">return_service_fee</span>=<span class="ruby-value">1</span>, <span class="ruby-identifier">delivered_amount_info</span>=<span class="ruby-value">1</span>, <span class="ruby-identifier">return_timestamp</span>=<span class="ruby-value">1</span>, <span class="ruby-identifier">return_version</span>=<span class="ruby-value">1</span>,
          <span class="ruby-identifier">return_promo</span>=<span class="ruby-value">0</span>)

  <span class="ruby-ivar">@params</span>     = { 
      <span class="ruby-identifier">msisdn</span><span class="ruby-operator">:</span> <span class="ruby-identifier">msisdn</span>, 
      <span class="ruby-identifier">destination_msisdn</span><span class="ruby-operator">:</span> <span class="ruby-identifier">destination_msisdn</span>, 
      <span class="ruby-identifier">product</span><span class="ruby-operator">:</span> <span class="ruby-identifier">product</span> 
  }
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">oid</span> = <span class="ruby-identifier">operator_id</span>

  <span class="ruby-ivar">@params</span>.<span class="ruby-identifier">merge</span>({
    <span class="ruby-identifier">cid1</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;&quot;</span>, <span class="ruby-identifier">cid2</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;&quot;</span>, <span class="ruby-identifier">cid3</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;&quot;</span>,
    <span class="ruby-identifier">reserved_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">reserved_id</span>,
    <span class="ruby-identifier">sender_sms</span><span class="ruby-operator">:</span> (<span class="ruby-identifier">sender_text</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;yes&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&quot;no&quot;</span>),
    <span class="ruby-identifier">send_sms</span><span class="ruby-operator">:</span> (<span class="ruby-identifier">send_sms</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;yes&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&quot;no&quot;</span>),
    <span class="ruby-identifier">sms</span><span class="ruby-operator">:</span> <span class="ruby-identifier">sms</span>,
    <span class="ruby-identifier">sender_text</span><span class="ruby-operator">:</span> <span class="ruby-identifier">sender_text</span>,
    <span class="ruby-identifier">delivered_amount_info</span><span class="ruby-operator">:</span> <span class="ruby-identifier">delivered_amount_info</span>,
    <span class="ruby-identifier">return_service_fee</span><span class="ruby-operator">:</span> <span class="ruby-identifier">return_service_fee</span>,
    <span class="ruby-identifier">return_timestamp</span><span class="ruby-operator">:</span> <span class="ruby-identifier">return_timestamp</span>,
    <span class="ruby-identifier">return_version</span><span class="ruby-operator">:</span> <span class="ruby-identifier">return_version</span>,
    <span class="ruby-identifier">return_promo</span><span class="ruby-operator">:</span> <span class="ruby-identifier">return_promo</span>
  })

  <span class="ruby-identifier">run_action</span> <span class="ruby-identifier">method</span>
  <span class="ruby-comment">#{</span>
  <span class="ruby-comment">#  requesting_msisdn:         response[:msisdn],</span>
  <span class="ruby-comment">#  destination_msisdn:        response[:destination_msisdn],       </span>
  <span class="ruby-comment">#  product_sent:              response[:actual_product_sent].to_i,</span>
  <span class="ruby-comment">#  local_amount:              response[:local_info_amount],</span>
  <span class="ruby-comment">#  local_value:               response[:local_info_value],</span>
  <span class="ruby-comment">#  local_currency_code:       response[:local_info_currency],       </span>
  <span class="ruby-comment">#  transaction_status:        response[:error_txt], </span>
  <span class="ruby-comment">#  operation_result:          response[:error_code],</span>
  <span class="ruby-comment">#  operation_info:            response[:info_txt],       </span>
  <span class="ruby-comment">#  transaction_api_id:        response[:transactionid].to_i,</span>
  <span class="ruby-comment">#  country_api_id:            response[:countryid].to_i,</span>
  <span class="ruby-comment">#  operator_api_id:           response[:operatorid].to_i,</span>
  <span class="ruby-comment">#  product_api_id:            response[:product_requested].to_i,       </span>
  <span class="ruby-comment">#  originator_currency_code:  response[:originating_currency],</span>
  <span class="ruby-comment">#  destination_currency_code: response[:destination_currency],       </span>
  <span class="ruby-comment">#  wholesale_price:           response[:wholesale_price],</span>
  <span class="ruby-comment">#  retail_price:              response[:retail_price],</span>
  <span class="ruby-comment">#  service_fee:               response[:service_fee]</span>
  <span class="ruby-comment">#}       </span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-transaction_info" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">transaction_info</span><span
            class="method-args">(id)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Retrieve available information on a specific transaction. Please note that
values of “input_value” and “debit_amount_validated” are rounded to 2
digits after the comma but are the same as the values returned in the
fields “input_value” and “validated_input_value” of the “topup” method
response.</p>
          
          

          
          <div class="method-source-code" id="transaction_info-source">
            <pre><span class="ruby-comment"># File lib/t2_airtime/api.rb, line 212</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">transaction_info</span>(<span class="ruby-identifier">id</span>)
  <span class="ruby-ivar">@params</span> = { <span class="ruby-identifier">transactionid</span><span class="ruby-operator">:</span> <span class="ruby-identifier">id</span> }
  <span class="ruby-identifier">run_action</span> <span class="ruby-value">:trans_info</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-transaction_list" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">transaction_list</span><span
            class="method-args">(start=(Time.now-24.hours), stop=Time.now, msisdn=nil, destination=nil, code=nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This method is used to retrieve the list of transactions performed within
the date range by the MSISDN if set. Note that both dates are included
during the search.</p>

<p>parameters</p>

<h6 id="method-i-transaction_list-label-"><span><a href="#method-i-transaction_list-label-">&para;</a> <a href="#top">&uarr;</a></span></h6>

<p>msisdn</p>
<hr>

<p>The format must be international with or without the ‘+’ or ‘00’:
“6012345678” or “+6012345678” or “006012345678” (Malaysia)</p>

<p>destination_msisdn</p>
<hr>

<p>The format must be international with or without the ‘+’ or ‘00’:
“6012345678” or “+6012345678” or “006012345678” (Malaysia)</p>

<p>code</p>
<hr>

<p>The error_code of the transactions to search for. E.g “0” to search for
only all successful transactions. If left empty, all transactions will be
returned(Failed and successful).</p>

<p>start_date</p>
<hr>

<p>Defines the start date of the search. Format must be YYYY-MM-DD.</p>

<p>stop_date</p>
<hr>

<p>Defines the end date of the search (included). Format must be YYYY-MM-DD.</p>
          
          

          
          <div class="method-source-code" id="transaction_list-source">
            <pre><span class="ruby-comment"># File lib/t2_airtime/api.rb, line 199</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">transaction_list</span>(<span class="ruby-identifier">start</span>=(<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span><span class="ruby-operator">-</span><span class="ruby-value">24</span>.<span class="ruby-identifier">hours</span>), <span class="ruby-identifier">stop</span>=<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>, <span class="ruby-identifier">msisdn</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">destination</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">code</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-ivar">@params</span>[<span class="ruby-value">:code</span>]               = <span class="ruby-identifier">code</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">code</span>
  <span class="ruby-ivar">@params</span>[<span class="ruby-value">:msisdn</span>]             = <span class="ruby-identifier">msisdn</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">msisdn</span>
  <span class="ruby-ivar">@params</span>[<span class="ruby-value">:stop_date</span>]          = <span class="ruby-identifier">to_yyyymmdd</span>(<span class="ruby-identifier">stop</span>)
  <span class="ruby-ivar">@params</span>[<span class="ruby-value">:start_date</span>]         = <span class="ruby-identifier">to_yyyymmdd</span>(<span class="ruby-identifier">start</span>)
  <span class="ruby-ivar">@params</span>[<span class="ruby-value">:destination_msisdn</span>] = <span class="ruby-identifier">destination</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">destination</span>
  <span class="ruby-identifier">run_action</span> <span class="ruby-value">:trans_list</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

